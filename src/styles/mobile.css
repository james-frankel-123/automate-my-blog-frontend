/* Mobile-first responsive styles */

/* ===== CONTENT BELOW FIXED HEADER (hero never hidden by top bar) ===== */
/* Desktop: clear fixed header (can wrap to 2 rows) so full hero is visible */
@media (min-width: 768px) {
  .dashboard-content-below-fixed-header {
    padding-top: max(128px, 80px + env(safe-area-inset-top, 0px) + 24px) !important;
  }
}
/* Fallback for very small viewports before mobile breakpoint */
.dashboard-content-below-fixed-header {
  padding-top: max(120px, 64px + env(safe-area-inset-top, 0px) + 24px) !important;
}

/* ===== GLOBAL MOBILE FOUNDATIONS ===== */
/* Touch-friendly: min 44x44px tap targets (WCAG 2.5.5) */
@media (max-width: 767px) {
  /* Ensure full width usage on mobile */
  * {
    box-sizing: border-box;
  }
  
  /* Hide desktop navigation on mobile */
  .desktop-nav {
    display: none !important;
  }
  
  .mobile-nav {
    display: flex !important;
  }

  /* Ensure proper viewport width and no horizontal scroll */
  html, body {
    overflow-x: hidden;
    width: 100%;
    max-width: 100%;
    -webkit-overflow-scrolling: touch;
  }

  /* Main container responsive fixes */
  #root {
    width: 100%;
    max-width: 100vw;
  }

  /* Prevent long URLs and text from causing horizontal scroll */
  .dashboard-tab-content,
  .dashboard-content-below-fixed-header,
  .ant-card-body {
    overflow-wrap: break-word;
    word-wrap: break-word;
  }

  /* Code blocks: scroll horizontally instead of expanding page */
  pre,
  code {
    max-width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Workflow container mobile optimization */
  .workflow-container {
    width: 100% !important;
    max-width: 100vw !important;
    margin: 0 !important;
    padding: var(--space-2) !important;
  }

  /* Touch targets: minimum 44px for interactive elements */
  .ant-btn {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 10px 16px !important;
  }

  .ant-btn.ant-btn-sm {
    min-height: 40px !important;
    min-width: 40px !important;
  }

  /* Links and clickable areas */
  a[role="button"],
  button.ant-btn-text {
    min-height: 44px !important;
    min-width: 44px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Modal: full width on small screens, safe area padding */
  .ant-modal {
    max-width: 100vw !important;
    margin: 8px !important;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .ant-modal-content {
    border-radius: 12px 12px 0 0 !important;
  }

  .ant-modal-body {
    max-height: calc(100vh - 120px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Tables: horizontal scroll instead of squashing */
  .ant-table-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .ant-table {
    min-width: 280px;
  }

  /* Thinking panel: slightly larger text on mobile */
  .thinking-panel {
    font-size: 14px;
  }

  .thinking-panel .ant-progress-text {
    font-size: 12px;
  }

  /* Main workflow sections: reduce padding on small screens */
  section#home,
  section#audience-segments {
    padding: var(--space-4) var(--space-3) !important;
    margin-bottom: var(--space-4) !important;
  }

  /* Logged-out header: compact on mobile */
  .logged-out-progress-header {
    padding: 10px 12px !important;
    padding-top: max(10px, env(safe-area-inset-top)) !important;
    min-height: 56px !important;
  }

  /* Content below fixed header: dynamic top offset so hero is never hidden by the bar */
  .dashboard-content-below-fixed-header {
    padding-top: max(116px, 56px + env(safe-area-inset-top, 0px) + 32px) !important;
  }

  .logged-out-header-left {
    min-width: 0 !important;
  }

  /* Hero: responsive title, subtitle and padding so they don't overflow on small screens */
  .unified-workflow-hero {
    padding: var(--space-4) var(--space-3) !important;
  }
  .unified-workflow-hero .ant-typography {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
  .unified-workflow-hero h2.ant-typography {
    font-size: 1.5rem !important;
    line-height: 1.3 !important;
  }
  .unified-workflow-hero .ant-typography + .ant-typography,
  .unified-workflow-hero p.ant-typography {
    font-size: 1rem !important;
  }

  /* Dashboard tab: reduce padding on mobile for more content space */
  .dashboard-tab-content {
    padding: var(--space-4) !important;
  }

  /* Footer: reduce horizontal padding on mobile */
  .dashboard-footer {
    padding-left: var(--space-4) !important;
    padding-right: var(--space-4) !important;
  }
}

/* Show desktop navigation on tablet and above */
@media (min-width: 768px) {
  .desktop-nav {
    display: flex !important;
  }
  
  .mobile-nav {
    display: none !important;
  }
}

/* Responsive title sizes */
@media (max-width: 480px) {
  .hero-title {
    font-size: 2.2rem !important;
    line-height: 1.3 !important;
  }
  
  .section-title {
    font-size: 1.8rem !important;
  }
  
  .card-title {
    font-size: 1.1rem !important;
  }
  
  .page-title {
    font-size: 2.5rem !important;
  }
}

@media (max-width: 600px) {
  .hero-title {
    font-size: 2.8rem !important;
  }
}

/* Responsive padding and margins */
@media (max-width: 767px) {
  .hero-section {
    padding: var(--space-5) var(--space-4) !important;
    margin-bottom: var(--space-5) !important;
  }
  
  .content-section {
    padding: var(--space-4) var(--space-2) !important;
  }
  
  .mobile-header {
    padding: var(--space-1) 0 !important;
  }
  
  .mobile-container {
    padding: 0 10px !important;
  }

  /* Compact main container */
  body > div > div {
    padding: var(--space-2) !important;
    max-width: 100% !important;
  }

  /* Reduce card spacing */
  .ant-card {
    margin-bottom: 15px !important;
  }

  /* Compact progress and step indicators */
  .ant-progress {
    margin: 10px 0 !important;
  }

  /* Reduce header spacing */
  .ant-typography h1 {
    margin-bottom: 8px !important;
    font-size: 1.8rem !important;
  }

  .ant-typography p {
    margin-bottom: 15px !important;
  }

  /* Compact step cards */
  .ant-steps {
    margin-bottom: 15px !important;
  }

  /* Mobile card layout optimization */
  .ant-col {
    padding: 4px !important;
  }

  /* Mobile Ant Design optimizations (touch targets kept from above) */
  .ant-btn {
    padding: 10px 16px !important;
    font-size: 14px !important;
  }

  .ant-input {
    padding: 8px 12px !important;
    font-size: 16px !important; /* Prevents zoom on iOS */
  }

  .ant-card {
    border-radius: 8px !important;
  }

  .ant-typography h1 {
    font-size: 24px !important;
    line-height: 1.3 !important;
  }

  .ant-typography h2 {
    font-size: 20px !important;
    line-height: 1.3 !important;
  }

  .ant-typography h3 {
    font-size: 18px !important;
    line-height: 1.3 !important;
  }

  /* Grid responsiveness */
  .ant-row {
    margin: 0 !important;
  }

  .ant-row .ant-col {
    padding: 8px !important;
  }

  /* Steps component mobile */
  .ant-steps {
    margin-bottom: 20px !important;
  }

  .ant-steps-item-title {
    font-size: 14px !important;
  }

  .ant-steps-item-description {
    font-size: 12px !important;
  }
}

/* Responsive text sizes */
@media (max-width: 480px) {
  .hero-paragraph {
    font-size: 18px !important;
  }
  
  .feature-icon {
    font-size: 36px !important;
  }
  
  .feature-text {
    font-size: 14px !important;
  }
}

/* ===== STAGING PROMOTE BAR (above mobile bottom nav when both present) ===== */
@media (max-width: 767px) {
  .staging-promote-bar {
    bottom: calc(56px + env(safe-area-inset-bottom, 0px)) !important;
    flex-wrap: wrap !important;
    padding: 8px 12px !important;
    gap: 8px !important;
    font-size: 12px !important;
    min-height: 44px !important;
  }
  .staging-promote-bar button {
    min-height: 44px !important;
    padding: 8px 12px !important;
  }
}

/* ===== ONBOARDING: WEBSITE INPUT ROW STACKS ON MOBILE ===== */
@media (max-width: 767px) {
  .website-input-form {
    max-width: 100% !important;
    padding: 0 var(--space-3) !important;
  }
  .website-input-row {
    flex-wrap: wrap !important;
    border-radius: var(--radius-base) !important;
  }
  .website-input-row .ant-input {
    border-radius: var(--radius-base) !important;
    min-height: 48px !important;
    font-size: 16px !important; /* Prevents iOS zoom on focus */
  }
  .website-input-row .ant-btn {
    border-radius: var(--radius-base) !important;
    width: 100% !important;
    min-height: 48px !important;
  }
}

/* ===== HEADING HERO / LARGE DISPLAY TYPOGRAPHY ===== */
@media (max-width: 767px) {
  .heading-hero {
    font-size: var(--font-size-3xl) !important; /* 32px */
    line-height: 1.2 !important;
  }
}
@media (max-width: 480px) {
  .heading-hero {
    font-size: var(--font-size-2xl) !important; /* 24px */
    line-height: 1.2 !important;
  }
}

/* ===== RESPONSIVE MEDIA (images, iframes) ===== */
@media (max-width: 767px) {
  img,
  video,
  iframe {
    max-width: 100% !important;
    height: auto !important;
  }
  iframe {
    min-height: 200px;
  }
}

/* ===== ADMIN LINK BAR: TOUCH-FRIENDLY ON MOBILE ===== */
@media (max-width: 767px) {
  .admin-link-bar {
    padding: 10px 16px !important;
  }
  .admin-link-bar a {
    padding: 8px 12px !important;
    min-height: 44px !important;
    display: inline-flex !important;
    align-items: center !important;
  }
}

/* ===== SAFE AREA INSETS (notched devices) ===== */
@supports (padding: env(safe-area-inset-bottom)) {
  @media (max-width: 767px) {
    /* Bottom nav / fixed bottom bars: add safe area padding */
    [data-mobile-bottom-nav],
    .mobile-bottom-nav {
      padding-bottom: calc(var(--space-2, 8px) + env(safe-area-inset-bottom)) !important;
    }

    /* Content above bottom nav: prevent content hidden behind home indicator */
    body {
      padding-bottom: env(safe-area-inset-bottom);
    }
  }
}